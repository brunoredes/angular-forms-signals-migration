<fieldset class="form-step" [formGroup]="formGroup()">
  <legend>Payment Information</legend>

  <div class="form-field">
    <label>Payment Method *</label>
    <select formControlName="method" (change)="onMethodChange($any($event.target).value)">
      <option value="">Select payment method...</option>
      <option value="credit">Credit Card</option>
      <option value="debit">Debit Card</option>
      <option value="pix">PIX</option>
      <option value="boleto">Boleto Banc√°rio</option>
    </select>
    @if (isFieldInvalid(formGroup().controls.method)) {
    <span class="error">
      {{ getFieldError(formGroup().controls.method) }}
    </span>
    }
  </div>

  <!-- Credit/Debit Card Form -->
  @if (selectedPaymentMethod === 'credit' || selectedPaymentMethod === 'debit') {
  <app-card-form [formGroup]="formGroup()">
  </app-card-form>
  }

  <!-- PIX Form -->
  @if (selectedPaymentMethod === 'pix') {
  <app-pix-form [formGroup]="formGroup()">
  </app-pix-form>
  }

  <!-- Boleto Form -->
  @if (selectedPaymentMethod === 'boleto') {
  <app-boleto-form [formGroup]="formGroup()">
  </app-boleto-form>
  }

  <div class="navigation-buttons">
    <button type="button" (click)="onPrevious()" class="btn-secondary" aria-label="Go to previous step">
      Previous
    </button>
    <button type="button" (click)="onSubmit()" class="btn-success" aria-label="Go to previous step">
      Complete Booking
    </button>
  </div>
</fieldset>
